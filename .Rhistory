usethis::use_github_action("test-coverage")
# install the new version of the package
# Add secondary repo for packages hosted on RSPM:
options(repos = c(
CRAN = "https://cran.rstudio.com/",
rspm = "https://rspm.hpc.biogen.com/RSPM/latest")
# grab a date-specific url from RSPM for previous releases of package
)
options('repos') # confirm "rspm" was added
install.packages("stanly")
install.packages("C:/Users/aclark5/Documents/GitHub2/stanly_0.3.0.tar.gz", repos = NULL, type = "source")
Sys.setenv(R_CONFIG_FILE = "envsetup.yml")
Sys.getenv("R_CONFIG_FILE")
system.file(Sys.getenv("R_CONFIG_FILE"),  package = "stanly")
Sys.getenv("R_CONFIG_FILE")
packageVersion("stanly") # should be "0.3.0"
# install the new version of the package
# Add secondary repo for packages hosted on RSPM:
options(repos = c(
CRAN = "https://cran.rstudio.com/",
# rspm = 'https://rspm.hpc.biogen.com/RSPM/2022-10-25+Y3Jhbiw4OToxODk0NzkzLDg4OjE4NzIzNzI7RUQ3QTczM0I'
rspm = "https://rspm.hpc.biogen.com/RSPM/latest"
)
)
options('repos') # confirm "rspm" was added
install.packages("stanly")
packageVersion("stanly") # should be "0.3.0"
# load the package
library(stanly)
# Set up output directory...
my_dir <- 'C:/Users/aclark5/Documents/GitHub2/stanly_output'
# Create ae-soc-pt R script and/or output
meta_t_ae_socpt(
product = "bg12ms", study = "109ms306", project = "interim1lte", # studyid = 7028
make_prog = TRUE, prog_dir = my_dir, # should be dev/ folder on J-drive
make_xpt = FALSE, xpt_dir = my_dir,
make_rtf = TRUE, rtf_dir = my_dir
)
# install / load packages
stanly::load_stanly()
# setup
path <- rstudioapi::documentPath(id = NULL)
wd <- dirname(path)
withr::with_dir(new = c(wd), setwd(wd))
progname <- 't-ae-soc-pt.R'
prod <- 'bg12ms'
st <- '109ms306'
proj <- 'interim1lte'
# Read the data
adsl_path <- create_data_path(dataset = 'adsl', prod, st, proj)
adsl <- haven::read_sas(adsl_path)
ADAE_path <- create_data_path(dataset = 'ADAE', prod, st, proj)
ADAE <- haven::read_sas(ADAE_path)
# filter rows, modify and select variables as needed
adsl2 <- adsl %>%
filter(SAFFL=='Y') %>%
select(USUBJID, one_of('TRTCBA'), one_of('TRTCBAN'))
ADAE2 <- ADAE %>%
filter(SAFFL == 'Y' & TRTEMFL == 'Y') %>%
select(-matches('TRTCBAN'), -matches('TRTCBA')) %>% # use from adsl
inner_join(adsl2, by = 'USUBJID') %>%
varN_fctr_reorder2() %>% # will automatically re-order any `var` by `varn`
arrange('AEBODSYS', 'AEDECOD')
column_layout <- pull_tlf_meta_db(study_id = 7028,
tlf_id = 'AE-SOC-PT',
table = 'col_layout')
# Create the table
t_ae_socpt_lst <- t_ae_socpt(
adsl = adsl2,
adae = ADAE2,
recode_missings = NULL,
sort_col = 3,
tier_var_soc = 'AEBODSYS',
tier_var_pt = 'AEDECOD',
tier_sort_soc = 'F',
tier_sort_pt = 'F',
add_col_label = 'n (%)',
overall_row_label = 'Number of subjects with any adverse event',
add_total = TRUE,
add_total_label = 'Total',
add_arm_total = FALSE,
add_arm_total_label = 'Not applicable',
trt_var = 'TRTCBA',
pop_label = 'Safety analysis set',
col_layout = column_layout,
progname = progname,
tlg_product = prod, tlg_study = st, tlg_project = proj,
use_workflow_db = TRUE,
make_xpt = FALSE,
xpt_dir = 'C:/Users/aclark5/Documents/GitHub2/stanly_output',
make_rtf = TRUE,
rtf_dir = 'C:/Users/aclark5/Documents/GitHub2/stanly_output',
rel_wd = NULL,
landscape = TRUE,
nrpp = 45
)
packageVersion("stanly") # should be "0.3.1"
# load the package
library(stanly)
# Set up output directory...
my_dir <- 'C:/Users/aclark5/Documents/GitHub2/stanly_output'
# Create ae-soc-pt R script and/or output
meta_t_ae_socpt(
product = "bg12ms", study = "109ms306", project = "interim1lte", # studyid = 7028
make_prog = TRUE, prog_dir = my_dir, # for production, should be dev/ folder on J-drive
make_xpt = FALSE, xpt_dir = my_dir,
make_rtf = TRUE, rtf_dir = my_dir
)
?t_ae_socpt
# Create ae-soc-pt R script and/or output
meta_t_ae_socpt(
product = "bg12ms", study = "109ms306", project = "interim1lte", # studyid = 7028
make_prog = TRUE, prog_dir = my_dir, # for production, should be dev/ folder on J-drive
make_xpt = FALSE, xpt_dir = my_dir,
make_rtf = TRUE, rtf_dir = my_dir
)
?pull_tlf_meta_db
?t_ae_socpt
options(repos = c(
CRAN = "https://cran.rstudio.com/",
rspm = "https://rspm.hpc.biogen.com/RSPM/latest"
)
)
options('repos')
packageVersion("stanly") # should be "0.3.1"
library(stanly)
# Set up output directory...
my_dir <- 'C:/Users/aclark5/Documents/GitHub2/stanly_output'
?t_ae_socpt
meta_t_ae_socpt(
product = "bg12ms", study = "109ms306", project = "interim1lte", # studyid = 7028
make_prog = TRUE, prog_dir = my_dir, # for production, should be dev/ folder on J-drive
make_xpt = FALSE, xpt_dir = my_dir,
make_rtf = TRUE, rtf_dir = my_dir
)
# install / load packages
stanly::load_stanly()
path <- rstudioapi::documentPath(id = NULL)
wd <- dirname(path)
withr::with_dir(new = c(wd), setwd(wd))
progname <- 't-ae-soc-pt.R'
prod <- 'bg12ms'
st <- '109ms306'
proj <- 'interim1lte'
# Read the data
adsl_path <- create_data_path(dataset = 'adsl', prod, st, proj)
adsl_path
adsl <- haven::read_sas(adsl_path)
ADAE_path <- create_data_path(dataset = 'ADAE', prod, st, proj)
ADAE <- haven::read_sas(ADAE_path)
# filter rows, modify and select variables as needed
adsl2 <- adsl %>%
filter(SAFFL=='Y') %>%
select(USUBJID, one_of('TRTCBA'), one_of('TRTCBAN'))
ADAE2 <- ADAE %>%
filter(SAFFL == 'Y' & TRTEMFL == 'Y') %>%
select(-matches('TRTCBAN'), -matches('TRTCBA')) %>% # use from adsl
inner_join(adsl2, by = 'USUBJID') %>%
varN_fctr_reorder2() %>% # will automatically re-order any `var` by `varn`
arrange('AEBODSYS', 'AEDECOD')
?pull_tlf_meta_db
column_layout <- pull_tlf_meta_db(study_id = 7028,
tlf_id = 'AE-SOC-PT',
table = 'col_layout')
column_layout
# Create the table
t_ae_socpt_lst <- t_ae_socpt(
adsl = adsl2,
adae = ADAE2,
recode_missings = NULL,
sort_col = 3,
tier_var_soc = 'AEBODSYS',
tier_var_pt = 'AEDECOD',
tier_sort_soc = 'F',
tier_sort_pt = 'F',
add_col_label = 'n (%)',
overall_row_label = 'Number of subjects with any adverse event',
add_total = TRUE,
add_total_label = 'Total',
add_arm_total = FALSE,
add_arm_total_label = 'Not applicable',
trt_var = 'TRTCBA',
pop_label = 'Safety analysis set',
col_layout = column_layout,
progname = progname,
tlg_product = prod, tlg_study = st, tlg_project = proj,
use_workflow_db = TRUE,
make_xpt = FALSE,
xpt_dir = 'C:/Users/aclark5/Documents/GitHub2/stanly_output',
make_rtf = TRUE,
rtf_dir = 'C:/Users/aclark5/Documents/GitHub2/stanly_output',
rel_wd = NULL,
landscape = TRUE,
nrpp = 45
)
packageVersion("Tplyr")
install.packages("Typlr")
packageVersion("stanly") # should be "0.3.1"
packageVersion("Tplyr")
install.packages("Tplyr")
install.packages("Tplyr")
packageVersion("Tplyr")
# load the package
library(stanly)
packageVersion("stanly") # should be "0.3.1"
packageVersion("Tplyr")
# load the package
library(stanly)
# Set up output directory...
my_dir <- 'C:/Users/aclark5/Documents/GitHub2/stanly_output'
# Create ae-soc-pt R script and/or output
meta_t_ae_socpt(
product = "bg12ms", study = "109ms306", project = "interim1lte", # studyid = 7028
make_prog = TRUE, prog_dir = my_dir, # for production, should be dev/ folder on J-drive
make_xpt = FALSE, xpt_dir = my_dir,
make_rtf = TRUE, rtf_dir = my_dir
)
rlang::last_error()
R.Version
R.version
